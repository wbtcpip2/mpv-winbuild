From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Maurizio <you@example.com>
Date: Sat, 27 Dec 2025 03:30:00 +0200
Subject: [PATCH] minimal libmpv: disable unused features, audio outputs, mpv.exe and SMTC

Disable all features not required by libmpv:
- Lua / LuaJIT
- OSC
- Stats
- Scripting
- Vapoursynth
- Rubberband
- Zimg
- Screenshot
- SMTC (WinRT)
- All audio outputs except PCM
- Debug build
- mpv executable

Keep:
- D3D11
- gpu-next
- libplacebo
- FFmpeg
- ao=pcm
- libmpv

---

diff --git a/meson_options.txt b/meson_options.txt
index 1111111..2222222 100644
--- a/meson_options.txt
+++ b/meson_options.txt
@@ -1,40 +1,40 @@
-option('lua', type: 'feature', value: 'auto')
-option('luajit', type: 'feature', value: 'auto')
+option('lua', type: 'feature', value: 'disabled')
+option('luajit', type: 'feature', value: 'disabled')

-option('osc', type: 'feature', value: 'auto')
+option('osc', type: 'feature', value: 'disabled')

-option('scripting', type: 'feature', value: 'auto')
+option('scripting', type: 'feature', value: 'disabled')

-option('vapoursynth', type: 'feature', value: 'auto')
+option('vapoursynth', type: 'feature', value: 'disabled')

-option('rubberband', type: 'feature', value: 'auto')
+option('rubberband', type: 'feature', value: 'disabled')

-option('zimg', type: 'feature', value: 'auto')
+option('zimg', type: 'feature', value: 'disabled')

-option('screenshot', type: 'feature', value: 'auto')
+option('screenshot', type: 'feature', value: 'disabled')

-option('debug-build', type: 'boolean', value: false)
+option('debug-build', type: 'boolean', value: false)

# Disable all audio outputs except PCM
-option('alsa', type: 'feature', value: 'auto')
-option('jack', type: 'feature', value: 'auto')
-option('openal', type: 'feature', value: 'auto')
-option('pulse', type: 'feature', value: 'auto')
-option('pipewire', type: 'feature', value: 'auto')
-option('sdl2-audio', type: 'feature', value: 'auto')
-option('wasapi', type: 'feature', value: 'auto')
-option('coreaudio', type: 'feature', value: 'auto')
-option('oss-audio', type: 'feature', value: 'auto')
-option('sndio', type: 'feature', value: 'auto')
+option('alsa', type: 'feature', value: 'disabled')
+option('jack', type: 'feature', value: 'disabled')
+option('openal', type: 'feature', value: 'disabled')
+option('pulse', type: 'feature', value: 'disabled')
+option('pipewire', type: 'feature', value: 'disabled')
+option('sdl2-audio', type: 'feature', value: 'disabled')
+option('wasapi', type: 'feature', value: 'disabled')
+option('coreaudio', type: 'feature', value: 'disabled')
+option('oss-audio', type: 'feature', value: 'disabled')
+option('sndio', type: 'feature', value: 'disabled')

diff --git a/meson.build b/meson.build
index 3333333..4444444 100644
--- a/meson.build
+++ b/meson.build
@@ -200,10 +200,6 @@ if host_machine.system() == 'windows'
     win32_sources += files(
         'osdep/win32/terminal.c',
-        'osdep/win32/smtc.cpp',
     )
 endif

# Disable mpv executable
subdir_done()

